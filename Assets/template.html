<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Mermaid for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Additional language support -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/powershell.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/dockerfile.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/nginx.min.js"></script>
    
    <!-- KaTeX for math -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #24292f;
            background-color: #ffffff;
            max-width: 980px;
            margin: 0 auto;
            padding: 32px;
        }
        
        /* Headings */
        h1, h2, h3, h4, h5, h6 {
            color: #1f2328;
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
        }
        
        h1 { font-size: 2em; padding-bottom: 0.3em; border-bottom: 1px solid #d0d7de; }
        h2 { font-size: 1.5em; padding-bottom: 0.3em; border-bottom: 1px solid #d0d7de; }
        h3 { font-size: 1.25em; }
        h4 { font-size: 1em; }
        h5 { font-size: 0.875em; }
        h6 { font-size: 0.85em; color: #656d76; }
        
        /* Links */
        a {
            color: #0969da;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        /* Code */
        code {
            font-family: ui-monospace, 'Cascadia Code', 'SF Mono', 'Consolas', 'Liberation Mono', Menlo, monospace;
            font-size: 85%;
            background-color: #f6f8fa;
            padding: 0.2em 0.4em;
            border-radius: 6px;
        }
        
        pre {
            background-color: #f6f8fa;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
            line-height: 1.45;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
            font-size: 100%;
        }
        
        /* Tables */
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 16px 0;
        }
        
        th, td {
            border: 1px solid #d0d7de;
            padding: 8px 13px;
            text-align: left;
        }
        
        th {
            background-color: #f6f8fa;
            font-weight: 600;
        }
        
        tr:nth-child(even) {
            background-color: #f6f8fa;
        }
        
        /* Blockquotes */
        blockquote {
            margin: 16px 0;
            padding: 0 1em;
            color: #656d76;
            border-left: 4px solid #d0d7de;
        }
        
        blockquote > :first-child { margin-top: 0; }
        blockquote > :last-child { margin-bottom: 0; }
        
        /* Lists */
        ul, ol {
            padding-left: 2em;
            margin: 16px 0;
        }
        
        li + li {
            margin-top: 0.25em;
        }
        
        /* Task lists */
        .task-list-item {
            list-style-type: none;
            margin-left: -1.5em;
        }
        
        .task-list-item input[type="checkbox"] {
            margin-right: 0.5em;
            vertical-align: middle;
        }
        
        /* Images */
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 16px 0;
        }
        
        /* Horizontal rule */
        hr {
            border: 0;
            height: 1px;
            background-color: #d0d7de;
            margin: 24px 0;
        }
        
        /* Mermaid diagrams */
        .mermaid {
            text-align: center;
            margin: 16px 0;
            background: #ffffff;
        }
        
        /* Definition lists */
        dl {
            margin: 16px 0;
        }
        
        dt {
            font-weight: 600;
            margin-top: 16px;
        }
        
        dd {
            margin-left: 2em;
            margin-bottom: 16px;
        }
        
        /* Footnotes */
        .footnote-ref {
            font-size: 0.75em;
            vertical-align: super;
        }
        
        .footnotes {
            margin-top: 32px;
            padding-top: 16px;
            border-top: 1px solid #d0d7de;
            font-size: 0.9em;
        }
        
        /* Abbreviations */
        abbr[title] {
            border-bottom: 1px dotted #656d76;
            cursor: help;
        }
        
        /* Keyboard */
        kbd {
            display: inline-block;
            padding: 3px 5px;
            font-size: 11px;
            line-height: 10px;
            color: #24292f;
            vertical-align: middle;
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            box-shadow: inset 0 -1px 0 #d0d7de;
        }
        
        /* Mark/highlight */
        mark {
            background-color: #fff8c5;
            padding: 0.1em 0.2em;
            border-radius: 3px;
        }
        
        /* Print styles */
        @media print {
            body {
                max-width: none;
                padding: 20px;
            }
            
            pre {
                white-space: pre-wrap;
                word-wrap: break-word;
            }
        }
    </style>
</head>
<body>
    <article id="content">
        {{CONTENT}}
    </article>
    
    <script>
        function renderContent() {
            // Initialize Mermaid
            mermaid.initialize({ 
                startOnLoad: false, 
                theme: 'default',
                securityLevel: 'loose',
                flowchart: { useMaxWidth: true, htmlLabels: true }
            });
            
            // Run Mermaid on all diagrams
            try {
                mermaid.run({ querySelector: '.mermaid' });
            } catch (e) {
                console.error('Mermaid error:', e);
            }
            
            // Highlight code blocks
            document.querySelectorAll('pre code').forEach((block) => {
                if (!block.closest('.mermaid')) {
                    hljs.highlightElement(block);
                }
            });
            
            // Render math with KaTeX
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false},
                        {left: '\\[', right: '\\]', display: true},
                        {left: '\\(', right: '\\)', display: false}
                    ],
                    throwOnError: false
                });
            }
        }
        
        // Initial render
        document.addEventListener('DOMContentLoaded', renderContent);
    </script>
</body>
</html>
